# guide_ui_interaction_design.md - UIインタラクション設計書作成ガイド

---

## 概要

このドキュメントは、プロジェクトにおけるUIインタラクション設計書を作成するためのガイドラインを提供します。
各UI要素（例: カード、スロット、ボタンなど）のインタラクションに関する仕様を、一貫したフォーマットで記述することを目的とします。

---

## ドキュメントの構成

UIインタラクション設計書は、以下のセクションで構成されます。

### 1. 最初の見出し

ドキュメントの冒頭には、以下の形式でファイル名と和名を記述します。

```
# [ファイル名(.md)] - [UI要素名]インタラクション設計書
```

*   **例**: `# ui_creature_card_interaction.md - クリーチャーカードインタラクション設計書`

### 2. 概要

ドキュメントの目的、スコープ、および主要な概念を簡潔に記述します。

*   **目的**: このドキュメントが何を定義するのかを明確にします。
*   **スコープ**: どのUI要素の、どのようなインタラクション（ホバー、ドラッグ、クリックなど）を扱うのかを記述します。
*   **主要な概念**: `UIStateMachine` など、インタラクション全体に影響する重要なシステムとの連携について言及します。

### 3. 共通の前提・制約

この設計書で扱うUI要素に共通する、実装上の前提条件や制約を記述します。

*   **例**: 
    *   全てのUI要素は、`BaseSpriteView` を継承していることを前提とする。
    *   アニメーションの期間は、`BaseSpriteView` の `_animationDuration` フィールドを尊重する。
    *   SEの再生は、`FXManager` を通じて行うことを前提とする。
    *   `CompositeObjectId` を持つGameObjectは、必ず `IdentifiableGameObject` コンポーネントを持つ。
    *   `MultiRendererVisualController` は、`BaseSpriteView` を継承するUI要素にアタッチされていることを前提とする。

### 4. 主要コンポーネント

このUI要素のインタラクションに関わる主要なコンポーネント、コマンド、アニメーションScriptableObjectをリストアップします。

*   **コンポーネント**:
    *   `[ComponentName].cs`: そのコンポーネントの役割を簡潔に記述します。
    *   **例**: `CreatureCardView.cs`: クリーチャーカードの視覚表現とインタラクションの起点となるViewコンポーネント。
*   **コマンド一覧**:
    *   このインタラクションで発行または購読されるコマンドのリスト。
    *   **例**: `SpriteHoverCommand`
*   **アニメーションScriptableObject一覧**:
    *   このインタラクションで利用されるアニメーションScriptableObjectのリスト。
    *   **例**: `HoverAnimationSO`

### 5. インタラクションフロー

各インタラクション（マウスイベントなど）について、以下のサブセクションで詳細を記述します。

#### 5.1. [インタラクション名]

*   **トリガー**: そのインタラクションが発生する条件を記述します。
*   **発行コマンド**: そのインタラクションによって発行されるコマンドを記述します。

##### 5.1.1. **[主要コンポーネント名] の処理**

*   このインタラクションが発生した際に、主要コンポーネントがどのような処理を行うかを記述します。
*   **例**:
    *   `UIStateMachine.CurrentState` が `UIState.Idle` の場合:
        *   通常のホバーアニメーション（例: スケールアップ、色変更）を開始。
        *   ホバーSEを再生。

##### 5.1.2. **アニメーション/SE**

*   このインタラクションで再生されるアニメーションやSEの詳細を記述します。
*   **例**:
    *   `CreatureCardView`: `_hoverAnimation` (スケール、色)、ホバーSE

### 6. 考慮事項と補足

インタラクション全体に関する追加の考慮事項や補足情報を記述します。

*   **例**:
    *   `UIStateMachine` との連携: 各UI要素は`UIStateMachine`の`CurrentState`を参照し、自身のインタラクション挙動を適切に制御します。
    *   コライダーの制御: ドラッグ中のカードやスロットのコライダーの有効/無効を適切に切り替えることで、正確なインタラクションとパフォーマンスを確保します。

### 7. 関連ファイル

このドキュメントに関連する他のMarkdownドキュメントへのリンクを相対パスで記述します。ソースコードファイルは含めません。

*   **例**:
    *   `[guide_design-principles.md](../../guide/guide_design-principles.md)`
    *   `[guide_unity-cs.md](../../guide/guide_unity-cs.md)`

### 8. 更新履歴

ドキュメントの変更履歴を記述します。

*   **フォーマット**: `YYYY-MM-DD: [変更内容の要約] (変更者名またはAI)`
*   **例**: `2025-07-25: 初版作成 (Gemini - Technical Writer for Game Development)`

---

## 関連ファイル

- [guide_rules.md](../guide/guide_rules.md)
- [guide_files.md](../guide/guide_files.md)

---

## 更新履歴

- 2025-07-25: 初版作成 (Gemini - Technical Writer for Game Development)
